# 기본 DB 설정 (로컬: H2 메모리, MySQL 문법 호환)
spring:
  datasource:
    # 기본값: H2 메모리 DB (MySQL 문법 호환을 위해 MODE=MySQL 옵션 추가)
    url: ${DB_URL:jdbc:h2:mem:testdb;MODE=MySQL}
    # 드라이버를 명시해 클래스패스 인식 실패를 방지 (문제의 핵심)
    driver-class-name: ${DB_DRIVER:org.h2.Driver}
    username: ${DB_USERNAME:sa}
    password: ${DB_PASSWORD:}

  jpa:
    # 개발/로컬에선 스키마를 자동으로 맞춤 (운영은 보통 none/validate 권장)
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        # 콘솔에서 SQL을 보기 좋게
        format_sql: true
    # SQL 로그 출력이 필요하면 주석 해제
    # show-sql: true

  h2:
    console:
      # H2 웹 콘솔 사용 (http://localhost:8080/h2-console)
      enabled: true

  jackson:
    serialization:
      FAIL_ON_EMPTY_BEANS: false # Hibernate 프록시/빈 객체 직렬화 예외 방지(스웨거 500 완화)

# JWT 토큰 유효시간/시크릿 기본값 (운영은 꼭 환경변수로 교체)
jwt:
  secret: ${JWT_SECRET:ThisIsAVeryLongLocalDevSecretKey_AtLeast32Chars!}
  access-token-validity-ms: 900000          # 15분
  refresh-token-validity-ms: 1209600000     # 14일

# 메일 발송 계정 (환경변수로 주입)
mail:
  username: ${MAIL_USERNAME:}
  password: ${MAIL_PASSWORD:}

# Redis 기본 접속 정보(로컬 기준)
redis:
  host: ${REDIS_HOST:localhost}
  port: ${REDIS_PORT:6379}

# 앱 내부에서 쓰는 검증 링크 베이스 URL
app:
  verify:
    base-url: ${APP_VERIFY_BASE_URL:http://localhost:8080}

# Swagger / OpenAPI 설정 (문서 생성 안전화: 우선 스캔 대상 0으로 만들어 500 차단)
springdoc:
  api-docs:
    enabled: true # /v3/api-docs 활성화
  swagger-ui:
    enabled: true # /swagger-ui/index.html 활성화
  packages-to-scan: com.ll.P_A.__doc_sanity__ # 존재하지 않는 패키지로 설정(우선 엔드포인트 스캔 0개로 띄우기)
  paths-to-match: /** # 일단 전경로 허용(필요 시 좁힐 수 있음)
  remove-broken-reference-definitions: true # 끊긴 참조 스키마 무시하고 진행
  default-consumes-media-type: application/json # 기본 요청 미디어 타입
  default-produces-media-type: application/json # 기본 응답 미디어 타입